# FROM alpine:3
FROM cgr.dev/chainguard/static:latest

ARG APP_COMMIT
ARG APP_BUILD_TIMESTAMP

ENV APP_COMMIT=${APP_COMMIT}
ENV APP_BUILD_TIMESTAMP=${APP_BUILD_TIMESTAMP}
ENV APP_STATIC_PATH=/frontend
ENV APP_ADDRESS=0.0.0.0:8080
ENV APP_LOG_FORMAT=json

COPY frontend/dist /frontend
COPY api/dist/api /

CMD ["/api"]
EXPOSE 8080
